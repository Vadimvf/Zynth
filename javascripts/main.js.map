{"version":3,"sources":["webpack/bootstrap cb67c59760422a811ddf","./javascripts/zynth.js","./javascripts/components/domAble.js","./javascripts/components/keyboard.js","./javascripts/components/note.js","./javascripts/components/constants.js","./javascripts/components/controls.js","./javascripts/tuna-master/tuna.js"],"names":["docEl","keyBoardElement","keyboard","Keyboard","parentEl","setListeners","controller","Controller","window","confirm","document","getElementById","addEventListener","addClass","setRange","$d","param","list","querySelectorAll","slice","call","DOMNodeCollection","HTMLElement","isEmptyObject","Object","keys","obj","length","JSON","stringify","merge","objects","accum","i","j","key","isMatch","el","selector","elProto","Element","prototype","func","matches","webkitMatchesSelector","msMatchesSelector","array","callback","html","each","push","innerHTML","string","setHTML","item","_setInner","innerEl","outerHTML","_addClasses","str","classArr","split","forEach","classList","add","klass","id","classes","_remove","remove","undefined","allChildren","elChildren","children","allParents","elParent","parentNode","elFound","reduce","a","b","concat","eventType","targetListener","delegatedListener","target","listener","e","nodeEl","removeEventListener","noteRange","OCTAVE","second","_createKeys","range","ctx","active","slideListener","on","playNote","bind","stopNote","keyId","preventDefault","type","keyCode","li","togglePress","off","removeClass","paramObj","note","gainNode1","gain","value","gainNode2","domAbleElement","Note","createNoteRange","keyObj","createElement","name","includes","keyEl","append","AudioContext","webkitAudioContext","noteName","oscType1","oscType2","freq","TONES","oscillatorNode1","_createOscillator","oscillatorNode2","_createGainNode","connect","isPressed","paramsObj","map","sort","gainNode","createGain","destination","osc","createOscillator","frequency","detune","start","currentTime","NOTES_LOW","NOTES_MIDDLE","NOTES_HIGH","first","third","KEY_MAP","c","d","f","g","h","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","semicolon","aaC2","aaC2s","aaD2","aaD2s","aaE2","aaF2","aaF2s","aaG2","aaG2s","aaH2","aaH2s","aaI2","aC3","aC3s","aD3","aD3s","aE3","aF3","aF3s","aG3","aG3s","aH3","aH3s","aI3","bC4","bC4s","bD4","bD4s","bE4","bF4","bF4s","bG4","bG4s","bH4","bH4s","bI4","cC5","cC5s","cD5","cD5s","cE5","F5","F5s","G5","G5s","H5","H5s","I5","C6","C6s","D6","D6s","E6","F6","F6s","G6","G6s","H6","H6s","I6","tuna","Tuna","keyboardObj","controls","_createControls","notes","settings","setEffects","rangeId","noteNames","connectEffects","eachNote","chorus","Chorus","rate","feedback","delay","bypass","PingPongDelay","wetLevel","delayTimeLeft","delayTimeRight","phaser","Phaser","depth","stereoPhase","baseModulationFrequency","bitcrusher","Bitcrusher","bits","normfreq","bufferSize","overdrive","Overdrive","outputGain","drive","curveAmount","algorithmIndex","tremolo","Tremolo","intensity","effects","compressor","effect","disconnect","handle","button","parent","setWaveTypeOsc1","setWaveTypeOsc2","contains","removeEffect","addEffect","controlEl","userContext","userInstance","pipe","val","Super","create","activate","writable","doActivate","input","activateNode","activateCallback","output","get","_bypass","set","_lastBypassValue","connectInOrder","nodeArray","console","error","getDefaults","result","defaults","automate","property","duration","startTime","dur","_is","method","automatable","cancelScheduledValues","setValueAtTime","FLOAT","BOOLEAN","STRING","INT","context","log","Error","connectify","__connectified__","proto","getPrototypeOf","oconnect","shimConnect","node","arguments","isPrototypeOf","apply","dbToWAVolume","db","Math","max","round","pow","fmod","tmp","tmp2","pY","l2","toExponential","match","parseInt","toFixed","parseFloat","sign","abs","tanh","exp","initValue","userVal","defaultVal","properties","processor","createScriptProcessor","last","step","onaudioprocess","inputBuffer","getChannelData","outputBuffer","floor","min","enumerable","Cabinet","convolver","newConvolver","impulsePath","makeupNode","makeupGain","Convolver","impulse","dryLevel","attenuator","splitter","createChannelSplitter","delayL","createDelay","delayR","feedbackGainNodeLR","feedbackGainNodeRL","merger","createChannelMerger","lfoL","LFO","delayTime","lfoR","phase","PI","_delay","offset","_depth","oscillation","_feedback","_rate","Compressor","compNode","createDynamicsCompressor","automakeup","threshold","release","attack","ratio","knee","computeMakeup","magicCoefficient","_automakeup","createConvolver","dry","filterLow","createBiquadFilter","filterHigh","wet","highCut","buffer","lowCut","level","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","decodeAudioData","response","send","Delay","filter","feedbackNode","cutoff","Filter","Q","resonance","filterType","MoogFilter","in1","in2","in3","in4","out1","out2","out3","out4","fb","inputFactor","inputDrive","waveshaper","createWaveShaper","outputDrive","ws_table","Float32Array","k_nSamples","scaled","_drive","_curveAmount","_algorithmIndex","waveshaperAlgorithms","curve","_outputGain","amount","n_samples","abx","filtersL","filtersR","feedbackGainNodeL","feedbackGainNodeR","filteredSignal","stage","filters","_baseModulationFrequency","_stereoPhase","newPhase","_phase","stereoToMonoMix","feedbackLevel","delayLeft","delayRight","_delayTimeLeft","_delayTimeRight","amplitudeL","amplitudeR","_intensity","WahWah","envelopeFollower","EnvelopeFollower","sweep","filterBp","filterPeaking","init","automode","enableAutoMode","sensitivity","baseFrequency","excursionOctaves","_automode","filterFreqTimeout","setFilterFreq","_baseFrequency","_excursionFrequency","_sweep","clearTimeout","setTimeout","_sensitivity","sampleRate","_excursionOctaves","_resonance","jsNode","buffersize","attackTime","releaseTime","_envelope","envelope","_attackTime","_attackC","_releaseTime","_releaseC","_callback","_target","activated","returnCompute","instance","event","compute","count","channels","numberOfChannels","current","chan","rms","sqrt","_frequency","_phaseInc","_offset","_oscillation","that","sin","toString"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/javascripts/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cb67c59760422a811ddf","import { $d } from './components/domAble';\nimport { Keyboard } from './components/keyboard';\nimport { Controller } from './components/controls';\nimport { Tuna } from './tuna-master/tuna';\n\n$d(function(){\n  const docEl = $d('html');\n  const keyBoardElement = $d('#keys');\n  const keyboard = new Keyboard({\n    parentEl: keyBoardElement,\n    docEl: docEl\n  });\n  keyboard.setListeners();\n  const controller = new Controller(keyboard);\n  window.controller = controller;\n\n  const confirm = document.getElementById('modal-confirm')\n  confirm && confirm.addEventListener(\"click\", function() {\n    $d(document.getElementById('modal')).addClass('hide')\n    controller.setRange(\"2\")\n  })\n  window.$d = $d;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./javascripts/zynth.js","const $d = param => {\n  if (typeof param === \"string\"){\n    let list = document.querySelectorAll(param);\n    list = [].slice.call(list);\n    return new DOMNodeCollection(list);\n  } else if (param instanceof HTMLElement){\n    return new DOMNodeCollection([param]);\n  } else if (typeof param === \"function\") {\n    document.addEventListener(\"DOMContentLoaded\", param);\n  }\n};\n\n$d.isEmptyObject = obj => {\n  if (Object.keys(obj).length === 0\n      && JSON.stringify(obj) === JSON.stringify({})){\n        return true;\n      }\n  return false;\n};\n\n\n$d.merge = (...objects) => {\n  if (objects.length <= 1) return objects;\n  let accum = objects[0];\n\n  for (let i = 1; i < objects.length; i++){\n    if ($d.isEmptyObject(objects[i])) continue;\n\n    for (let j = 0; j < Object.keys(objects[i]).length; j++){\n      let key = Object.keys(objects[i])[j];\n      accum[key] = objects[i][key];\n    }\n  }\n\n  return accum;\n};\n\n$d.isMatch = (el, selector) => {\n\tconst elProto = Element.prototype;\n\tconst func = elProto.matches ||\n               elProto.webkitMatchesSelector ||\n               elProto.msMatchesSelector;\n\treturn func.call(el, selector);\n};\n\nclass DOMNodeCollection {\n  constructor(array){\n    for (let i = 0; i < array.length; i++) this[i] = array[i];\n    this.length = array.length;\n  }\n\n  each(callback){\n    for (let i = 0; i < this.length; i++){\n      callback(this[i]);\n    }\n  }\n\n  getHTML(){\n    let html = [];\n    this.each (el => html.push(el.innerHTML));\n    return html;\n  }\n\n  setHTML(string){\n    //DANGEROUS\n    this.each(el => el.innerHTML = string);\n    return this;\n  }\n\n  empty(){\n    this.setHTML(\"\");\n    return this;\n  }\n\n  append(item){\n    const _setInner = html => this.each(el => el.innerHTML += html);\n\n    if (item instanceof DOMNodeCollection){\n      item.each(innerEl => _setInner(innerEl.outerHTML));\n    } else if (item instanceof HTMLElement){\n      _setInner(item.outerHTML);\n    } else {\n      _setInner(item);\n    }\n\n    return this;\n  }\n\n  addClass(string){\n    function _addClasses(el, str) {\n      const classArr = string.split(\" \");\n      classArr.forEach(klass => el.classList.add(klass));\n    }\n\n    if (typeof string === \"string\") {\n      this.each(el => _addClasses(el, string));\n    }\n\n    return this;\n  }\n\n  id(string){\n    if (typeof string === \"string\") {\n      this.each(el => el.id = string);\n    }\n\n    return this;\n  }\n\n  removeClass(classes) {\n    const _remove = (el, classes) => {\n      classes.forEach(klass => el.classList.remove(klass));\n    };\n\n    if (typeof classes === \"string\") {\n      classes = classes.split(\" \");\n      this.each(el => _remove(el, classes));\n\n    } else if (classes === undefined) {\n      this.each(el => _remove(el, el.classList));\n    }\n\n    return this;\n  }\n\n  children(){\n    let allChildren = [];\n\n    this.each(el => {\n      const elChildren = [].slice.call(el.children);\n      allChildren.push(elChildren);\n    });\n\n    return new DOMNodeCollection(allChildren);\n  }\n\n  parent() {\n    let allParents = [];\n\n    this.each (el => {\n      const elParent = el.parentNode;\n      allParents.push(elParent);\n    });\n\n    return new DOMNodeCollection(allParents);\n  }\n\n  find(selector){\n    if (!(typeof selector === \"string\")) return null;\n    let list = [];\n\n    this.each (el => {\n      let elFound = [].slice.call(el.querySelectorAll(selector));\n      list.push(elFound);\n    });\n\n    list.reduce((a, b) => a.concat(b));\n    return new DOMNodeCollection(list);\n  }\n\n  on(eventType, ...targetListener) {\n    let [delegatedListener] = targetListener;\n\n    if (targetListener.length > 1) {\n      let [target, listener] = targetListener;\n\n      delegatedListener = (e, nodeEl) => {\n        if ($d.isMatch(e.target, target)) listener(e);\n      };\n    }\n\n    this.each (el => el.addEventListener(eventType, delegatedListener));\n\n    return delegatedListener;\n  }\n\n  off(eventType, listener) {\n    this.each (el => el.removeEventListener(eventType, listener));\n  }\n\n  convertAll(){\n    for (let i = 0; i< Object.keys(this).length-1; i++){\n      let key = Object.keys(this)[i];\n      this[key] = $d(this[key]);\n    }\n\n    return this;\n  }\n// end Class DOMNodeCollection\n}\n\nexport { $d };\n\n\n\n// WEBPACK FOOTER //\n// ./javascripts/components/domAble.js","import { Note } from './note';\nimport { $d } from './domAble';\nimport { KEY_MAP, TONES, OCTAVE, DEFAULT } from './constants';\nimport { Controller } from './controls';\n\nclass Keyboard {\n  constructor({parentEl, docEl, noteRange=OCTAVE.second}){\n    let keys = _createKeys(parentEl, noteRange, {});\n    this.keys = keys;\n    this.range = noteRange;\n    this.el = parentEl;\n    this.ctx = docEl;\n    this.active = {};\n    this.slideListener = null;\n  }\n\n  setListeners(){\n    let el = this.el;\n    let ctx = this.ctx;\n    el.on('mousedown', 'div.key', this.playNote.bind(this));\n    el.on('mouseout', 'div.key', this.stopNote.bind(this));\n    ctx.on('mouseup', this.stopNote.bind(this));\n\n    el.on('touchstart', 'div.key', this.playNote.bind(this));\n    el.on('touchend', 'div.key', this.stopNote.bind(this));\n\n    ctx.on('keydown', this.playNote.bind(this));\n    ctx.on('keyup', this.stopNote.bind(this));\n  }\n\n  playNote(e){\n    let keyId;\n    e.preventDefault();\n    if (e.type === \"keydown\"){\n      keyId = this.range[e.keyCode];\n    } else if (e.type === \"mousedown\"){\n      this.slideListener = this.el.on('mouseover', 'div.key', this.playNote.bind(this));\n      keyId = e.target.id;\n    } else {\n      keyId = e.target.id;\n    }\n\n    if (!keyId) return;\n    if (this.active[keyId]) return;\n\n    this.active[keyId] = true;\n    let li = $d(`div#${keyId}`);\n    li.addClass(\"pressed\");\n    this.keys[keyId].togglePress();\n  }\n\n  stopNote(e){\n    let keyId;\n    if (e.type === \"keyup\"){\n      keyId = this.range[e.keyCode];\n    } else if (e.type === \"mouseup\"){\n      this.el.off('mouseover', this.slideListener);\n      this.slideListener = null;\n      keyId = e.target.id;\n    } else {\n      keyId = e.target.id;\n    }\n    if (!this.active[keyId]) return;\n\n    this.active[keyId] = false;\n    let li = $d(`div#${keyId}`);\n    this.keys[keyId].togglePress();\n    li.removeClass(\"pressed\");\n  }\n\n  setRange(noteRange, paramObj){\n    for (let note in this.active) {\n      this.keys[note].gainNode1.gain.value = 0;\n      this.keys[note].gainNode2.gain.value = 0;\n    }\n    this.el.setHTML(\"\");\n    this.keys = _createKeys(this.el, noteRange, paramObj);\n    this.range = noteRange;\n    this.active = {};\n  }\n\n}\n\nfunction _createKeys(domAbleElement, noteRange, paramObj){\n  const keys = Note.createNoteRange(noteRange, paramObj);\n  let keyObj = {};\n  keys.forEach( key => {\n    let li = document.createElement(\"li\");\n    let name = key.name;\n    let klass = \"key\";\n    keyObj[name] = key;\n    if (name.includes(\"s\")) {\n      klass += \" sharp\";\n      $d(li).addClass(\"hidden\");\n    }\n    let keyEl = $d(li).setHTML(`<div class=\"${klass}\" id=${name}></div>`);\n\n    domAbleElement.append(keyEl);\n  });\n\n  return keyObj;\n};\n\n\nexport { Keyboard };\n\n\n\n// WEBPACK FOOTER //\n// ./javascripts/components/keyboard.js","import { KEY_MAP, TONES, OCTAVE } from './constants';\n\nconst ctx = new (window.AudioContext || window.webkitAudioContext)();\n\nclass Note {\n  constructor(noteName, {oscType1=\"sine\", oscType2=\"sine\"}){\n    this.name = noteName;\n    this.freq = TONES[noteName];\n    this.oscillatorNode1 = _createOscillator(this.freq, oscType1);\n    this.oscillatorNode2 = _createOscillator(this.freq, oscType2);\n    this.gainNode1 = _createGainNode();\n    this.gainNode2 = _createGainNode();\n    this.oscillatorNode1.connect(this.gainNode1);\n    this.oscillatorNode2.connect(this.gainNode2);\n    this.isPressed = false;\n  }\n\n  static createNoteRange(noteRange, paramsObj){\n    let range = Object.keys(noteRange).map( key => {\n      let noteName = noteRange[key];\n      return new Note(noteName, paramsObj);\n    });\n    range = range.sort((a, b) => b.freq - a.freq );\n    return range;\n  }\n\n  togglePress(){\n    this.isPressed = !this.isPressed;\n    if (this.isPressed){\n      this.gainNode1.gain.value = 0.3;\n      this.gainNode2.gain.value = 0.3;\n    } else {\n      this.gainNode1.gain.value = 0;\n      this.gainNode2.gain.value = 0;\n    }\n  }\n\n};\n\nfunction _createGainNode (){\n  const gainNode = ctx.createGain();\n  gainNode.gain.value = 0;\n  gainNode.connect(ctx.destination);\n  return gainNode;\n};\n\nfunction _createOscillator (freq, type){\n  const osc = ctx.createOscillator();\n  osc.type = type;\n  osc.frequency.value = freq;\n  osc.detune.value = 0;\n  osc.start(ctx.currentTime);\n  return osc;\n};\n\nexport { Note, ctx };\n\n\n\n// WEBPACK FOOTER //\n// ./javascripts/components/note.js","const NOTES_LOW = {\n  65: 'aaC2',\n  87: 'aaC2s',\n  83: 'aaD2',\n  69: 'aaD2s',\n  68: 'aaE2',\n  70: 'aaF2',\n  84: 'aaF2s',\n  71: 'aaG2',\n  89: 'aaG2s',\n  72: 'aaH2',\n  85: 'aaH2s',\n  74: 'aaI2',\n  75: 'aC3',\n  79: 'aC3s',\n  76: 'aD3',\n  80: 'aD3s',\n  186:'aE3'\n};\n\nconst NOTES_MIDDLE = {\n  65: 'aC3',\n  87: 'aC3s',\n  83: 'aD3',\n  69: 'aD3s',\n  68: 'aE3',\n  70: 'aF3',\n  84: 'aF3s',\n  71: 'aG3',\n  89: 'aG3s',\n  72: 'aH3',\n  85: 'aH3s',\n  74: 'aI3',\n  75: 'bC4',\n  79: 'bC4s',\n  76: 'bD4',\n  80: 'bD4s',\n  186:'bE4'\n};\n\nconst NOTES_HIGH = {\n  65: 'bC4',\n  87: 'bC4s',\n  83: 'bD4',\n  69: 'bD4s',\n  68: 'bE4',\n  70: 'bF4',\n  84: 'bF4s',\n  71: 'bG4',\n  89: 'bG4s',\n  72: 'bH4',\n  85: 'bH4s',\n  74: 'bI4',\n  75: 'cC5',\n  79: 'cC5s',\n  76: 'cD5',\n  80: 'cD5s',\n  186:'cE5'\n};\n\nconst OCTAVE = {\n  first: NOTES_LOW,\n  second: NOTES_MIDDLE,\n  third: NOTES_HIGH\n};\n\nconst KEY_MAP = {\n  a: 65,\n  b: 66,\n  c: 67,\n  d: 68,\n  e: 69,\n  f: 70,\n  g: 71,\n  h: 72,\n  i: 73,\n  j: 74,\n  k: 75,\n  l: 76,\n  m: 77,\n  n: 78,\n  o: 79,\n  p: 80,\n  q: 81,\n  r: 82,\n  s: 83,\n  t: 84,\n  u: 85,\n  v: 86,\n  w: 87,\n  x: 88,\n  y: 89,\n  z: 90,\n  semicolon: 186,\n};\n\nconst TONES = {\n  aaC2:\t65.41,\n  aaC2s: \t69.3,\n  aaD2:\t73.42,\n  aaD2s: \t77.78,\n  aaE2:\t82.41,\n  aaF2:\t87.31,\n  aaF2s: \t92.5,\n  aaG2:\t98,\n  aaG2s: \t103.83,\n  aaH2:\t110,\n  aaH2s: \t116.54,\n  aaI2:\t123.47,\n  aC3:\t130.81,\n  aC3s: \t138.59,\n  aD3:\t146.83,\n  aD3s: \t155.56,\n  aE3:\t164.81,\n  aF3:\t174.61,\n  aF3s: \t185,\n  aG3:\t196,\n  aG3s: \t207.65,\n  aH3:\t220,\n  aH3s: \t233.08,\n  aI3:\t246.94,\n  bC4:\t261.63,\n  bC4s: \t277.18,\n  bD4:\t293.66,\n  bD4s: \t311.13,\n  bE4:\t329.63,\n  bF4:\t349.23,\n  bF4s: \t369.99,\n  bG4:\t392,\n  bG4s: \t415.3,\n  bH4:\t440,\n  bH4s: \t466.16,\n  bI4:\t493.88,\n  cC5:\t523.25,\n  cC5s: \t554.37,\n  cD5:\t587.33,\n  cD5s: \t622.25,\n  cE5:\t659.25,\n  F5:\t698.46,\n  F5s: \t739.99,\n  G5:\t783.99,\n  G5s: \t830.61,\n  H5:\t880,\n  H5s: \t932.33,\n  I5:\t987.77,\n  C6:\t1046.5,\n  C6s: \t1108.73,\n  D6:\t1174.66,\n  D6s: \t1244.51,\n  E6:\t1318.51,\n  F6:\t1396.91,\n  F6s: \t1479.98,\n  G6:\t1567.98,\n  G6s: \t1661.22,\n  H6:\t1760,\n  H6s: \t1864.66,\n  I6:\t1975.53\n  };\n\nexport { KEY_MAP, TONES, OCTAVE };\n\n\n\n// WEBPACK FOOTER //\n// ./javascripts/components/constants.js","import { KEY_MAP, TONES, OCTAVE } from './constants';\nimport { Note, ctx } from './note';\nimport { $d } from './domAble';\nimport { Tuna } from '../tuna-master/tuna';\n\nconst tuna = new Tuna (ctx);\n\nclass Controller {\n  constructor(keyboardObj) {\n    let controls = _createControls();\n    this.keyboard = keyboardObj;\n    this.notes = keyboardObj.keys;\n    this.settings = {\n      oscType1: \"sine\",\n      oscType2: \"sine\"\n    };\n    this.oscType1 = \"sine\";\n    this.oscType2 = \"sine\";\n    this.setEffects();\n    this.setListeners();\n  }\n\n  setRange(rangeId){\n    let range;\n    if (rangeId === \"1\"){\n      range = OCTAVE.first;\n    } else if (rangeId === \"2\"){\n      range = OCTAVE.second;\n    } else {\n      range = OCTAVE.third;\n    }\n    let noteNames = [];\n    this.keyboard.setRange(range, this.settings);\n    this.notes = this.keyboard.keys;\n    this.connectEffects();\n  }\n\n  setWaveTypeOsc1(type){\n    this.eachNote(note => note.oscillatorNode1.type = type);\n    this.settings.oscType1 = type;\n  }\n\n  setWaveTypeOsc2(type){\n    this.eachNote(note => note.oscillatorNode2.type = type);\n    this.settings.oscType2 = type;\n  }\n\n  setEffects(){\n    this.chorus = new tuna.Chorus({\n      rate: 1.5,\n      feedback: 0.2,\n      delay: 0.0045,\n      bypass: 0\n    });\n\n    this.delay = new tuna.PingPongDelay({\n      wetLevel: 1, //0 to 1\n      feedback: 0.6, //0 to 1\n      delayTimeLeft: 150, //1 to 10000 (milliseconds)\n      delayTimeRight: 200 //1 to 10000 (milliseconds)\n    });\n\n    this.phaser = new tuna.Phaser({\n      rate: 1.2,                     //0.01 to 8 is a decent range, but higher values are possible\n      depth: 0.3,                    //0 to 1\n      feedback: 0.2,                 //0 to 1+\n      stereoPhase: 30,               //0 to 180\n      baseModulationFrequency: 700,  //500 to 1500\n      bypass: 0\n    });\n\n    this.bitcrusher = new tuna.Bitcrusher({\n      bits: 4,          //1 to 16\n      normfreq: 0.1,    //0 to 1\n      bufferSize: 4096  //256 to 16384\n    });\n\n    this.overdrive = new tuna.Overdrive({\n      outputGain: 1,         //0 to 1+\n      drive: 1,              //0 to 1\n      curveAmount: 1,          //0 to 1\n      algorithmIndex: 5,       //0 to 5, selects one of our drive algorithms\n      outputGain: 0.4,         //0 to 1+\n      drive: 1,              //0 to 1\n      curveAmount: 1,          //0 to 1\n      algorithmIndex: 3,       //0 to 5, selects one of our drive algorithms\n      bypass: 0\n    });\n\n    this.tremolo = new tuna.Tremolo({\n      intensity: 0.8,    //0 to 1\n      rate: 5,         //0.001 to 8\n      stereoPhase: 0,    //0 to 180\n      bypass: 0\n    });\n\n    this.connectEffects();\n  }\n\n  connectEffects(){\n    let effects = [this.chorus, this.delay, this.phaser, this.tremolo,\n                   this.bitcrusher, this.compressor, this.overdrive];\n\n    this.eachNote(note => {\n      let gainNode1 = note.gainNode1;\n      let gainNode2 = note.gainNode2;\n      effects.forEach(effect => {\n        gainNode1.connect(effect);\n        gainNode2.connect(ctx.destination);\n      });\n    });\n  }\n\n  addEffect(effect){\n    effect.connect(ctx.destination);\n  }\n\n  removeEffect(effect){\n    effect.disconnect(ctx.destination);\n  }\n\n  setListeners(){\n    $d('#controller').on('mouseup', 'p', this.handle.bind(this));\n    $d('#controller').on('touchend', 'p', this.handle.bind(this));\n  }\n\n  handle(e){\n    e.preventDefault();\n    let button = $d(e.target).parent()[0];\n    switch (button.classList[0]) {\n      case \"osc1\":\n        $d('.osc1').removeClass('selected');\n        $d(button).addClass('selected');\n        this.setWaveTypeOsc1(button.id);\n        break;\n      case \"osc2\":\n        $d('.osc2').removeClass('selected');\n        $d(button).addClass('selected');\n        this.setWaveTypeOsc2(button.id);\n        break;\n      case \"range\":\n        $d('.range').removeClass('selected');\n        $d(button).addClass('selected');\n        this.setRange(button.id);\n        break;\n      case \"effect\":\n        if (button.classList.contains(\"selected\")){\n          $d(button).removeClass('selected');\n          this.removeEffect(this[button.id]);\n        } else {\n          $d(button).addClass('selected');\n          this.addEffect(this[button.id]);\n        }\n        break;\n    }\n  }\n\n  eachNote(callback){\n    const keys = Object.keys(this.notes);\n    for (let i = 0; i < keys.length; i++){\n      callback(this.notes[keys[i]], i);\n    }\n\n    return this.keys;\n  }\n\n}\n\nfunction _createControls(){\n  const controlEl = $d(controller);\n}\n\nexport { Controller };\n\n\n\n// WEBPACK FOOTER //\n// ./javascripts/components/controls.js","/*\n    Copyright (c) 2012 DinahMoe AB & Oskar Eriksson\n\n    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy,\n    modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software\n    is furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\n    OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\nvar userContext,\n    userInstance,\n    pipe = function(param, val) {\n        param.value = val;\n    },\n    Super = Object.create(null, {\n        activate: {\n            writable: true,\n            value: function(doActivate) {\n                if (doActivate) {\n                    this.input.disconnect();\n                    this.input.connect(this.activateNode);\n                    if (this.activateCallback) {\n                        this.activateCallback(doActivate);\n                    }\n                } else {\n                    this.input.disconnect();\n                    this.input.connect(this.output);\n                }\n            }\n        },\n        bypass: {\n            get: function() {\n                return this._bypass;\n            },\n            set: function(value) {\n                if (this._lastBypassValue === value) {\n                    return;\n                }\n                this._bypass = value;\n                this.activate(!value);\n                this._lastBypassValue = value;\n            }\n        },\n        connect: {\n            value: function(target) {\n                this.output.connect(target);\n            }\n        },\n        disconnect: {\n            value: function(target) {\n                this.output.disconnect(target);\n            }\n        },\n        connectInOrder: {\n            value: function(nodeArray) {\n                var i = nodeArray.length - 1;\n                while (i--) {\n                    if (!nodeArray[i].connect) {\n                        return console.error(\"AudioNode.connectInOrder: TypeError: Not an AudioNode.\", nodeArray[i]);\n                    }\n                    if (nodeArray[i + 1].input) {\n                        nodeArray[i].connect(nodeArray[i + 1].input);\n                    } else {\n                        nodeArray[i].connect(nodeArray[i + 1]);\n                    }\n                }\n            }\n        },\n        getDefaults: {\n            value: function() {\n                var result = {};\n                for (var key in this.defaults) {\n                    result[key] = this.defaults[key].value;\n                }\n                return result;\n            }\n        },\n        automate: {\n            value: function(property, value, duration, startTime) {\n                var start = startTime ? ~~(startTime / 1000) : userContext.currentTime,\n                    dur = duration ? ~~(duration / 1000) : 0,\n                    _is = this.defaults[property],\n                    param = this[property],\n                    method;\n\n                if (param) {\n                    if (_is.automatable) {\n                        if (!duration) {\n                            method = \"setValueAtTime\";\n                        } else {\n                            method = \"linearRampToValueAtTime\";\n                            param.cancelScheduledValues(start);\n                            param.setValueAtTime(param.value, start);\n                        }\n                        param[method](value, dur + start);\n                    } else {\n                        param = value;\n                    }\n                } else {\n                    console.error(\"Invalid Property for \" + this.name);\n                }\n            }\n        }\n    }),\n    FLOAT = \"float\",\n    BOOLEAN = \"boolean\",\n    STRING = \"string\",\n    INT = \"int\";\n\nfunction Tuna(context) {\n    if (!(this instanceof Tuna)) {\n        return new Tuna(context);\n    }\n    if (!window.AudioContext) {\n        window.AudioContext = window.webkitAudioContext;\n    }\n    if (!context) {\n        console.log(\"tuna.js: Missing audio context! Creating a new context for you.\");\n        context = window.AudioContext && (new window.AudioContext());\n    }\n    if (!context) {\n        throw new Error(\"Tuna cannot initialize because this environment does not support web audio.\");\n    }\n    connectify(context);\n    userContext = context;\n    userInstance = this;\n}\n\nfunction connectify(context) {\n    if (context.__connectified__ === true) return;\n\n    var gain = context.createGain(),\n        proto = Object.getPrototypeOf(Object.getPrototypeOf(gain)),\n        oconnect = proto.connect;\n\n    proto.connect = shimConnect;\n    context.__connectified__ = true; // Prevent overriding connect more than once\n\n    function shimConnect() {\n        var node = arguments[0];\n        if (node === undefined) return;\n        arguments[0] = Super.isPrototypeOf ? (Super.isPrototypeOf(node) ? node.input : node) : (node.input || node);\n        oconnect.apply(this, arguments);\n        return node;\n    }\n}\n\nfunction dbToWAVolume(db) {\n    return Math.max(0, Math.round(100 * Math.pow(2, db / 6)) / 100);\n}\n\nfunction fmod(x, y) {\n    // http://kevin.vanzonneveld.net\n    // *     example 1: fmod(5.7, 1.3);\n    // *     returns 1: 0.5\n    var tmp, tmp2, p = 0,\n        pY = 0,\n        l = 0.0,\n        l2 = 0.0;\n\n    tmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/);\n    p = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n    tmp = y.toExponential().match(/^.\\.?(.*)e(.+)$/);\n    pY = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\n\n    if (pY > p) {\n        p = pY;\n    }\n\n    tmp2 = (x % y);\n\n    if (p < -100 || p > 20) {\n        // toFixed will give an out of bound error so we fix it like this:\n        l = Math.round(Math.log(tmp2) / Math.log(10));\n        l2 = Math.pow(10, l);\n\n        return (tmp2 / l2).toFixed(l - p) * l2;\n    } else {\n        return parseFloat(tmp2.toFixed(-p));\n    }\n}\n\nfunction sign(x) {\n    if (x === 0) {\n        return 1;\n    } else {\n        return Math.abs(x) / x;\n    }\n}\n\nfunction tanh(n) {\n    return (Math.exp(n) - Math.exp(-n)) / (Math.exp(n) + Math.exp(-n));\n}\n\nfunction initValue(userVal, defaultVal) {\n    return userVal === undefined ? defaultVal : userVal;\n}\n\nTuna.prototype.Bitcrusher = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n    this.input = userContext.createGain();\n    this.activateNode = userContext.createGain();\n    this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n    this.output = userContext.createGain();\n\n    this.activateNode.connect(this.processor);\n    this.processor.connect(this.output);\n\n    var phaser = 0,\n        last = 0,\n        input, output, step, i, length;\n    this.processor.onaudioprocess = function(e) {\n        input = e.inputBuffer.getChannelData(0),\n        output = e.outputBuffer.getChannelData(0),\n        step = Math.pow(1 / 2, this.bits);\n        length = input.length;\n        for (i = 0; i < length; i++) {\n            phaser += this.normfreq;\n            if (phaser >= 1.0) {\n                phaser -= 1.0;\n                last = step * Math.floor(input[i] / step + 0.5);\n            }\n            output[i] = last;\n        }\n    };\n\n    this.bits = properties.bits || this.defaults.bits.value;\n    this.normfreq = initValue(properties.normfreq, this.defaults.normfreq.value);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Bitcrusher.prototype = Object.create(Super, {\n    name: {\n        value: \"Bitcrusher\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            bits: {\n                value: 4,\n                min: 1,\n                max: 16,\n                automatable: false,\n                type: INT\n            },\n            bufferSize: {\n                value: 4096,\n                min: 256,\n                max: 16384,\n                automatable: false,\n                type: INT\n            },\n            bypass: {\n                value: false,\n                automatable: false,\n                type: BOOLEAN\n            },\n            normfreq: {\n                value: 0.1,\n                min: 0.0001,\n                max: 1.0,\n                automatable: false,\n                type: FLOAT\n            }\n        }\n    },\n    bits: {\n        enumerable: true,\n        get: function() {\n            return this.processor.bits;\n        },\n        set: function(value) {\n            this.processor.bits = value;\n        }\n    },\n    normfreq: {\n        enumerable: true,\n        get: function() {\n            return this.processor.normfreq;\n        },\n        set: function(value) {\n            this.processor.normfreq = value;\n        }\n    }\n});\n\nTuna.prototype.Cabinet = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.activateNode = userContext.createGain();\n    this.convolver = this.newConvolver(properties.impulsePath || \"../impulses/impulse_guitar.wav\");\n    this.makeupNode = userContext.createGain();\n    this.output = userContext.createGain();\n\n    this.activateNode.connect(this.convolver.input);\n    this.convolver.output.connect(this.makeupNode);\n    this.makeupNode.connect(this.output);\n\n    this.makeupGain = initValue(properties.makeupGain, this.defaults.makeupGain);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Cabinet.prototype = Object.create(Super, {\n    name: {\n        value: \"Cabinet\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            makeupGain: {\n                value: 1,\n                min: 0,\n                max: 20,\n                automatable: true,\n                type: FLOAT\n            },\n            bypass: {\n                value: false,\n                automatable: false,\n                type: BOOLEAN\n            }\n        }\n    },\n    makeupGain: {\n        enumerable: true,\n        get: function() {\n            return this.makeupNode.gain;\n        },\n        set: function(value) {\n            this.makeupNode.gain.value = value;\n        }\n    },\n    newConvolver: {\n        value: function(impulsePath) {\n            return new userInstance.Convolver({\n                impulse: impulsePath,\n                dryLevel: 0,\n                wetLevel: 1\n            });\n        }\n    }\n});\n\nTuna.prototype.Chorus = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.attenuator = this.activateNode = userContext.createGain();\n    this.splitter = userContext.createChannelSplitter(2);\n    this.delayL = userContext.createDelay();\n    this.delayR = userContext.createDelay();\n    this.feedbackGainNodeLR = userContext.createGain();\n    this.feedbackGainNodeRL = userContext.createGain();\n    this.merger = userContext.createChannelMerger(2);\n    this.output = userContext.createGain();\n\n    this.lfoL = new userInstance.LFO({\n        target: this.delayL.delayTime,\n        callback: pipe\n    });\n    this.lfoR = new userInstance.LFO({\n        target: this.delayR.delayTime,\n        callback: pipe\n    });\n\n    this.input.connect(this.attenuator);\n    this.attenuator.connect(this.output);\n    this.attenuator.connect(this.splitter);\n    this.splitter.connect(this.delayL, 0);\n    this.splitter.connect(this.delayR, 1);\n    this.delayL.connect(this.feedbackGainNodeLR);\n    this.delayR.connect(this.feedbackGainNodeRL);\n    this.feedbackGainNodeLR.connect(this.delayR);\n    this.feedbackGainNodeRL.connect(this.delayL);\n    this.delayL.connect(this.merger, 0, 0);\n    this.delayR.connect(this.merger, 0, 1);\n    this.merger.connect(this.output);\n\n    this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n    this.rate = initValue(properties.rate, this.defaults.rate.value);\n    this.delay = initValue(properties.delay, this.defaults.delay.value);\n    this.depth = initValue(properties.depth, this.defaults.depth.value);\n    this.lfoR.phase = Math.PI / 2;\n    this.attenuator.gain.value = 0.6934; // 1 / (10 ^ (((20 * log10(3)) / 3) / 20))\n    this.lfoL.activate(true);\n    this.lfoR.activate(true);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Chorus.prototype = Object.create(Super, {\n    name: {\n        value: \"Chorus\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            feedback: {\n                value: 0.4,\n                min: 0,\n                max: 0.95,\n                automatable: false,\n                type: FLOAT\n            },\n            delay: {\n                value: 0.0045,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            },\n            depth: {\n                value: 0.7,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            },\n            rate: {\n                value: 1.5,\n                min: 0,\n                max: 8,\n                automatable: false,\n                type: FLOAT\n            },\n            bypass: {\n                value: false,\n                automatable: false,\n                type: BOOLEAN\n            }\n        }\n    },\n    delay: {\n        enumerable: true,\n        get: function() {\n            return this._delay;\n        },\n        set: function(value) {\n            this._delay = 0.0002 * (Math.pow(10, value) * 2);\n            this.lfoL.offset = this._delay;\n            this.lfoR.offset = this._delay;\n            this._depth = this._depth;\n        }\n    },\n    depth: {\n        enumerable: true,\n        get: function() {\n            return this._depth;\n        },\n        set: function(value) {\n            this._depth = value;\n            this.lfoL.oscillation = this._depth * this._delay;\n            this.lfoR.oscillation = this._depth * this._delay;\n        }\n    },\n    feedback: {\n        enumerable: true,\n        get: function() {\n            return this._feedback;\n        },\n        set: function(value) {\n            this._feedback = value;\n            this.feedbackGainNodeLR.gain.value = this._feedback;\n            this.feedbackGainNodeRL.gain.value = this._feedback;\n        }\n    },\n    rate: {\n        enumerable: true,\n        get: function() {\n            return this._rate;\n        },\n        set: function(value) {\n            this._rate = value;\n            this.lfoL.frequency = this._rate;\n            this.lfoR.frequency = this._rate;\n        }\n    }\n});\n\nTuna.prototype.Compressor = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.compNode = this.activateNode = userContext.createDynamicsCompressor();\n    this.makeupNode = userContext.createGain();\n    this.output = userContext.createGain();\n\n    this.compNode.connect(this.makeupNode);\n    this.makeupNode.connect(this.output);\n\n    this.automakeup = initValue(properties.automakeup, this.defaults.automakeup.value);\n    this.makeupGain = properties.makeupGain || this.defaults.makeupGain.value;\n    this.threshold = initValue(properties.threshold, this.defaults.threshold.value);\n    this.release = properties.release || this.defaults.release.value;\n    this.attack = initValue(properties.attack, this.defaults.attack.value);\n    this.ratio = properties.ratio || this.defaults.ratio.value;\n    this.knee = initValue(properties.knee, this.defaults.knee.value);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Compressor.prototype = Object.create(Super, {\n    name: {\n        value: \"Compressor\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            threshold: {\n                value: -20,\n                min: -60,\n                max: 0,\n                automatable: true,\n                type: FLOAT\n            },\n            release: {\n                value: 250,\n                min: 10,\n                max: 2000,\n                automatable: true,\n                type: FLOAT\n            },\n            makeupGain: {\n                value: 1,\n                min: 1,\n                max: 100,\n                automatable: true,\n                type: FLOAT\n            },\n            attack: {\n                value: 1,\n                min: 0,\n                max: 1000,\n                automatable: true,\n                type: FLOAT\n            },\n            ratio: {\n                value: 4,\n                min: 1,\n                max: 50,\n                automatable: true,\n                type: FLOAT\n            },\n            knee: {\n                value: 5,\n                min: 0,\n                max: 40,\n                automatable: true,\n                type: FLOAT\n            },\n            automakeup: {\n                value: false,\n                automatable: false,\n                type: BOOLEAN\n            },\n            bypass: {\n                value: false,\n                automatable: false,\n                type: BOOLEAN\n            }\n        }\n    },\n    computeMakeup: {\n        value: function() {\n            var magicCoefficient = 4, // raise me if the output is too hot\n                c = this.compNode;\n            return -(c.threshold.value - c.threshold.value / c.ratio.value) / magicCoefficient;\n        }\n    },\n    automakeup: {\n        enumerable: true,\n        get: function() {\n            return this._automakeup;\n        },\n        set: function(value) {\n            this._automakeup = value;\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\n        }\n    },\n    threshold: {\n        enumerable: true,\n        get: function() {\n            return this.compNode.threshold;\n        },\n        set: function(value) {\n            this.compNode.threshold.value = value;\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\n        }\n    },\n    ratio: {\n        enumerable: true,\n        get: function() {\n            return this.compNode.ratio;\n        },\n        set: function(value) {\n            this.compNode.ratio.value = value;\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\n        }\n    },\n    knee: {\n        enumerable: true,\n        get: function() {\n            return this.compNode.knee;\n        },\n        set: function(value) {\n            this.compNode.knee.value = value;\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\n        }\n    },\n    attack: {\n        enumerable: true,\n        get: function() {\n            return this.compNode.attack;\n        },\n        set: function(value) {\n            this.compNode.attack.value = value / 1000;\n        }\n    },\n    release: {\n        enumerable: true,\n        get: function() {\n            return this.compNode.release;\n        },\n        set: function(value) {\n            this.compNode.release.value = value / 1000;\n        }\n    },\n    makeupGain: {\n        enumerable: true,\n        get: function() {\n            return this.makeupNode.gain;\n        },\n        set: function(value) {\n            this.makeupNode.gain.value = dbToWAVolume(value);\n        }\n    }\n});\n\nTuna.prototype.Convolver = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.activateNode = userContext.createGain();\n    this.convolver = userContext.createConvolver();\n    this.dry = userContext.createGain();\n    this.filterLow = userContext.createBiquadFilter();\n    this.filterHigh = userContext.createBiquadFilter();\n    this.wet = userContext.createGain();\n    this.output = userContext.createGain();\n\n    this.activateNode.connect(this.filterLow);\n    this.activateNode.connect(this.dry);\n    this.filterLow.connect(this.filterHigh);\n    this.filterHigh.connect(this.convolver);\n    this.convolver.connect(this.wet);\n    this.wet.connect(this.output);\n    this.dry.connect(this.output);\n\n    this.dryLevel = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n    this.wetLevel = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n    this.highCut = properties.highCut || this.defaults.highCut.value;\n    this.buffer = properties.impulse || \"../impulses/ir_rev_short.wav\";\n    this.lowCut = properties.lowCut || this.defaults.lowCut.value;\n    this.level = initValue(properties.level, this.defaults.level.value);\n    this.filterHigh.type = \"lowpass\";\n    this.filterLow.type = \"highpass\";\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Convolver.prototype = Object.create(Super, {\n    name: {\n        value: \"Convolver\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            highCut: {\n                value: 22050,\n                min: 20,\n                max: 22050,\n                automatable: true,\n                type: FLOAT\n            },\n            lowCut: {\n                value: 20,\n                min: 20,\n                max: 22050,\n                automatable: true,\n                type: FLOAT\n            },\n            dryLevel: {\n                value: 1,\n                min: 0,\n                max: 1,\n                automatable: true,\n                type: FLOAT\n            },\n            wetLevel: {\n                value: 1,\n                min: 0,\n                max: 1,\n                automatable: true,\n                type: FLOAT\n            },\n            level: {\n                value: 1,\n                min: 0,\n                max: 1,\n                automatable: true,\n                type: FLOAT\n            }\n        }\n    },\n    lowCut: {\n        get: function() {\n            return this.filterLow.frequency;\n        },\n        set: function(value) {\n            this.filterLow.frequency.value = value;\n        }\n    },\n    highCut: {\n        get: function() {\n            return this.filterHigh.frequency;\n        },\n        set: function(value) {\n            this.filterHigh.frequency.value = value;\n        }\n    },\n    level: {\n        get: function() {\n            return this.output.gain;\n        },\n        set: function(value) {\n            this.output.gain.value = value;\n        }\n    },\n    dryLevel: {\n        get: function() {\n            return this.dry.gain;\n        },\n        set: function(value) {\n            this.dry.gain.value = value;\n        }\n    },\n    wetLevel: {\n        get: function() {\n            return this.wet.gain;\n        },\n        set: function(value) {\n            this.wet.gain.value = value;\n        }\n    },\n    buffer: {\n        enumerable: false,\n        get: function() {\n            return this.convolver.buffer;\n        },\n        set: function(impulse) {\n            var convolver = this.convolver,\n                xhr = new XMLHttpRequest();\n            if (!impulse) {\n                console.log(\"Tuna.Convolver.setBuffer: Missing impulse path!\");\n                return;\n            }\n            xhr.open(\"GET\", impulse, true);\n            xhr.responseType = \"arraybuffer\";\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    if (xhr.status < 300 && xhr.status > 199 || xhr.status === 302) {\n                        userContext.decodeAudioData(xhr.response, function(buffer) {\n                            convolver.buffer = buffer;\n                        }, function(e) {\n                            if (e) console.log(\"Tuna.Convolver.setBuffer: Error decoding data\" + e);\n                        });\n                    }\n                }\n            };\n            xhr.send(null);\n        }\n    }\n});\n\nTuna.prototype.Delay = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.activateNode = userContext.createGain();\n    this.dry = userContext.createGain();\n    this.wet = userContext.createGain();\n    this.filter = userContext.createBiquadFilter();\n    this.delay = userContext.createDelay();\n    this.feedbackNode = userContext.createGain();\n    this.output = userContext.createGain();\n\n    this.activateNode.connect(this.delay);\n    this.activateNode.connect(this.dry);\n    this.delay.connect(this.filter);\n    this.filter.connect(this.feedbackNode);\n    this.feedbackNode.connect(this.delay);\n    this.feedbackNode.connect(this.wet);\n    this.wet.connect(this.output);\n    this.dry.connect(this.output);\n\n    this.delayTime = properties.delayTime || this.defaults.delayTime.value;\n    this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n    this.wetLevel = initValue(properties.wetLevel, this.defaults.wetLevel.value);\n    this.dryLevel = initValue(properties.dryLevel, this.defaults.dryLevel.value);\n    this.cutoff = properties.cutoff || this.defaults.cutoff.value;\n    this.filter.type = \"lowpass\";\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Delay.prototype = Object.create(Super, {\n    name: {\n        value: \"Delay\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            delayTime: {\n                value: 100,\n                min: 20,\n                max: 1000,\n                automatable: false,\n                type: FLOAT\n            },\n            feedback: {\n                value: 0.45,\n                min: 0,\n                max: 0.9,\n                automatable: true,\n                type: FLOAT\n            },\n            cutoff: {\n                value: 20000,\n                min: 20,\n                max: 20000,\n                automatable: true,\n                type: FLOAT\n            },\n            wetLevel: {\n                value: 0.5,\n                min: 0,\n                max: 1,\n                automatable: true,\n                type: FLOAT\n            },\n            dryLevel: {\n                value: 1,\n                min: 0,\n                max: 1,\n                automatable: true,\n                type: FLOAT\n            }\n        }\n    },\n    delayTime: {\n        enumerable: true,\n        get: function() {\n            return this.delay.delayTime;\n        },\n        set: function(value) {\n            this.delay.delayTime.value = value / 1000;\n        }\n    },\n    wetLevel: {\n        enumerable: true,\n        get: function() {\n            return this.wet.gain;\n        },\n        set: function(value) {\n            this.wet.gain.value = value;\n        }\n    },\n    dryLevel: {\n        enumerable: true,\n        get: function() {\n            return this.dry.gain;\n        },\n        set: function(value) {\n            this.dry.gain.value = value;\n        }\n    },\n    feedback: {\n        enumerable: true,\n        get: function() {\n            return this.feedbackNode.gain;\n        },\n        set: function(value) {\n            this.feedbackNode.gain.value = value;\n        }\n    },\n    cutoff: {\n        enumerable: true,\n        get: function() {\n            return this.filter.frequency;\n        },\n        set: function(value) {\n            this.filter.frequency.value = value;\n        }\n    }\n});\n\nTuna.prototype.Filter = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.activateNode = userContext.createGain();\n    this.filter = userContext.createBiquadFilter();\n    this.output = userContext.createGain();\n\n    this.activateNode.connect(this.filter);\n    this.filter.connect(this.output);\n\n    this.frequency = properties.frequency || this.defaults.frequency.value;\n    this.Q = properties.resonance || this.defaults.Q.value;\n    this.filterType = initValue(properties.filterType, this.defaults.filterType.value);\n    this.gain = initValue(properties.gain, this.defaults.gain.value);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Filter.prototype = Object.create(Super, {\n    name: {\n        value: \"Filter\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            frequency: {\n                value: 800,\n                min: 20,\n                max: 22050,\n                automatable: true,\n                type: FLOAT\n            },\n            Q: {\n                value: 1,\n                min: 0.001,\n                max: 100,\n                automatable: true,\n                type: FLOAT\n            },\n            gain: {\n                value: 0,\n                min: -40,\n                max: 40,\n                automatable: true,\n                type: FLOAT\n            },\n            bypass: {\n                value: false,\n                automatable: false,\n                type: BOOLEAN\n            },\n            filterType: {\n                value: \"lowpass\",\n                automatable: false,\n                type: STRING\n            }\n        }\n    },\n    filterType: {\n        enumerable: true,\n        get: function() {\n            return this.filter.type;\n        },\n        set: function(value) {\n            this.filter.type = value;\n        }\n    },\n    Q: {\n        enumerable: true,\n        get: function() {\n            return this.filter.Q;\n        },\n        set: function(value) {\n            this.filter.Q.value = value;\n        }\n    },\n    gain: {\n        enumerable: true,\n        get: function() {\n            return this.filter.gain;\n        },\n        set: function(value) {\n            this.filter.gain.value = value;\n        }\n    },\n    frequency: {\n        enumerable: true,\n        get: function() {\n            return this.filter.frequency;\n        },\n        set: function(value) {\n            this.filter.frequency.value = value;\n        }\n    }\n});\n\nTuna.prototype.MoogFilter = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\n\n    this.input = userContext.createGain();\n    this.activateNode = userContext.createGain();\n    this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\n    this.output = userContext.createGain();\n\n    this.activateNode.connect(this.processor);\n    this.processor.connect(this.output);\n\n    var in1, in2, in3, in4, out1, out2, out3, out4;\n    in1 = in2 = in3 = in4 = out1 = out2 = out3 = out4 = 0.0;\n    var input, output, f, fb, i, length, inputFactor;\n    this.processor.onaudioprocess = function(e) {\n        input = e.inputBuffer.getChannelData(0),\n            output = e.outputBuffer.getChannelData(0),\n            f = this.cutoff * 1.16,\n            inputFactor = 0.35013 * (f * f) * (f * f);\n        fb = this.resonance * (1.0 - 0.15 * f * f);\n        length = input.length;\n        for (i = 0; i < length; i++) {\n            input[i] -= out4 * fb;\n            input[i] *= inputFactor;\n            out1 = input[i] + 0.3 * in1 + (1 - f) * out1; // Pole 1\n            in1 = input[i];\n            out2 = out1 + 0.3 * in2 + (1 - f) * out2; // Pole 2\n            in2 = out1;\n            out3 = out2 + 0.3 * in3 + (1 - f) * out3; // Pole 3\n            in3 = out2;\n            out4 = out3 + 0.3 * in4 + (1 - f) * out4; // Pole 4\n            in4 = out3;\n            output[i] = out4;\n        }\n    };\n\n    this.cutoff = initValue(properties.cutoff, this.defaults.cutoff.value);\n    this.resonance = initValue(properties.resonance, this.defaults.resonance.value);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.MoogFilter.prototype = Object.create(Super, {\n    name: {\n        value: \"MoogFilter\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            bufferSize: {\n                value: 4096,\n                min: 256,\n                max: 16384,\n                automatable: false,\n                type: INT\n            },\n            bypass: {\n                value: false,\n                automatable: false,\n                type: BOOLEAN\n            },\n            cutoff: {\n                value: 0.065,\n                min: 0.0001,\n                max: 1.0,\n                automatable: false,\n                type: FLOAT\n            },\n            resonance: {\n                value: 3.5,\n                min: 0.0,\n                max: 4.0,\n                automatable: false,\n                type: FLOAT\n            }\n        }\n    },\n    cutoff: {\n        enumerable: true,\n        get: function() {\n            return this.processor.cutoff;\n        },\n        set: function(value) {\n            this.processor.cutoff = value;\n        }\n    },\n    resonance: {\n        enumerable: true,\n        get: function() {\n            return this.processor.resonance;\n        },\n        set: function(value) {\n            this.processor.resonance = value;\n        }\n    }\n});\n\nTuna.prototype.Overdrive = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.activateNode = userContext.createGain();\n    this.inputDrive = userContext.createGain();\n    this.waveshaper = userContext.createWaveShaper();\n    this.outputDrive = userContext.createGain();\n    this.output = userContext.createGain();\n\n    this.activateNode.connect(this.inputDrive);\n    this.inputDrive.connect(this.waveshaper);\n    this.waveshaper.connect(this.outputDrive);\n    this.outputDrive.connect(this.output);\n\n    this.ws_table = new Float32Array(this.k_nSamples);\n    this.drive = initValue(properties.drive, this.defaults.drive.value);\n    this.outputGain = initValue(properties.outputGain, this.defaults.outputGain.value);\n    this.curveAmount = initValue(properties.curveAmount, this.defaults.curveAmount.value);\n    this.algorithmIndex = initValue(properties.algorithmIndex, this.defaults.algorithmIndex.value);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Overdrive.prototype = Object.create(Super, {\n    name: {\n        value: \"Overdrive\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            drive: {\n                value: 1,\n                min: 0,\n                max: 1,\n                automatable: true,\n                type: FLOAT,\n                scaled: true\n            },\n            outputGain: {\n                value: 1,\n                min: 0,\n                max: 1,\n                automatable: true,\n                type: FLOAT,\n                scaled: true\n            },\n            curveAmount: {\n                value: 0.725,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            },\n            algorithmIndex: {\n                value: 0,\n                min: 0,\n                max: 5,\n                automatable: false,\n                type: INT\n            }\n        }\n    },\n    k_nSamples: {\n        value: 8192\n    },\n    drive: {\n        get: function() {\n            return this.inputDrive.gain;\n        },\n        set: function(value) {\n            this._drive = value;\n        }\n    },\n    curveAmount: {\n        get: function() {\n            return this._curveAmount;\n        },\n        set: function(value) {\n            this._curveAmount = value;\n            if (this._algorithmIndex === undefined) {\n                this._algorithmIndex = 0;\n            }\n            this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount, this.k_nSamples, this.ws_table);\n            this.waveshaper.curve = this.ws_table;\n        }\n    },\n    outputGain: {\n        get: function() {\n            return this.outputDrive.gain;\n        },\n        set: function(value) {\n            this._outputGain = dbToWAVolume(value);\n        }\n    },\n    algorithmIndex: {\n        get: function() {\n            return this._algorithmIndex;\n        },\n        set: function(value) {\n            this._algorithmIndex = value;\n            this.curveAmount = this._curveAmount;\n        }\n    },\n    waveshaperAlgorithms: {\n        value: [\n            function(amount, n_samples, ws_table) {\n                amount = Math.min(amount, 0.9999);\n                var k = 2 * amount / (1 - amount),\n                    i, x;\n                for (i = 0; i < n_samples; i++) {\n                    x = i * 2 / n_samples - 1;\n                    ws_table[i] = (1 + k) * x / (1 + k * Math.abs(x));\n                }\n            },\n            function(amount, n_samples, ws_table) {\n                var i, x, y;\n                for (i = 0; i < n_samples; i++) {\n                    x = i * 2 / n_samples - 1;\n                    y = ((0.5 * Math.pow((x + 1.4), 2)) - 1) * y >= 0 ? 5.8 : 1.2;\n                    ws_table[i] = tanh(y);\n                }\n            },\n            function(amount, n_samples, ws_table) {\n                var i, x, y, a = 1 - amount;\n                for (i = 0; i < n_samples; i++) {\n                    x = i * 2 / n_samples - 1;\n                    y = x < 0 ? -Math.pow(Math.abs(x), a + 0.04) : Math.pow(x, a);\n                    ws_table[i] = tanh(y * 2);\n                }\n            },\n            function(amount, n_samples, ws_table) {\n                var i, x, y, abx, a = 1 - amount > 0.99 ? 0.99 : 1 - amount;\n                for (i = 0; i < n_samples; i++) {\n                    x = i * 2 / n_samples - 1;\n                    abx = Math.abs(x);\n                    if (abx < a) y = abx;\n                    else if (abx > a) y = a + (abx - a) / (1 + Math.pow((abx - a) / (1 - a), 2));\n                    else if (abx > 1) y = abx;\n                    ws_table[i] = sign(x) * y * (1 / ((a + 1) / 2));\n                }\n            },\n            function(amount, n_samples, ws_table) { // fixed curve, amount doesn't do anything, the distortion is just from the drive\n                var i, x;\n                for (i = 0; i < n_samples; i++) {\n                    x = i * 2 / n_samples - 1;\n                    if (x < -0.08905) {\n                        ws_table[i] = (-3 / 4) * (1 - (Math.pow((1 - (Math.abs(x) - 0.032857)), 12)) + (1 / 3) * (Math.abs(x) - 0.032847)) + 0.01;\n                    } else if (x >= -0.08905 && x < 0.320018) {\n                        ws_table[i] = (-6.153 * (x * x)) + 3.9375 * x;\n                    } else {\n                        ws_table[i] = 0.630035;\n                    }\n                }\n            },\n            function(amount, n_samples, ws_table) {\n                var a = 2 + Math.round(amount * 14),\n                    // we go from 2 to 16 bits, keep in mind for the UI\n                    bits = Math.round(Math.pow(2, a - 1)),\n                    // real number of quantization steps divided by 2\n                    i, x;\n                for (i = 0; i < n_samples; i++) {\n                    x = i * 2 / n_samples - 1;\n                    ws_table[i] = Math.round(x * bits) / bits;\n                }\n            }\n        ]\n    }\n});\n\nTuna.prototype.Phaser = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.splitter = this.activateNode = userContext.createChannelSplitter(2);\n    this.filtersL = [];\n    this.filtersR = [];\n    this.feedbackGainNodeL = userContext.createGain();\n    this.feedbackGainNodeR = userContext.createGain();\n    this.merger = userContext.createChannelMerger(2);\n    this.filteredSignal = userContext.createGain();\n    this.output = userContext.createGain();\n    this.lfoL = new userInstance.LFO({\n        target: this.filtersL,\n        callback: this.callback\n    });\n    this.lfoR = new userInstance.LFO({\n        target: this.filtersR,\n        callback: this.callback\n    });\n\n    var i = this.stage;\n    while (i--) {\n        this.filtersL[i] = userContext.createBiquadFilter();\n        this.filtersR[i] = userContext.createBiquadFilter();\n        this.filtersL[i].type = \"allpass\";\n        this.filtersR[i].type = \"allpass\";\n    }\n    this.input.connect(this.splitter);\n    this.input.connect(this.output);\n    this.splitter.connect(this.filtersL[0], 0, 0);\n    this.splitter.connect(this.filtersR[0], 1, 0);\n    this.connectInOrder(this.filtersL);\n    this.connectInOrder(this.filtersR);\n    this.filtersL[this.stage - 1].connect(this.feedbackGainNodeL);\n    this.filtersL[this.stage - 1].connect(this.merger, 0, 0);\n    this.filtersR[this.stage - 1].connect(this.feedbackGainNodeR);\n    this.filtersR[this.stage - 1].connect(this.merger, 0, 1);\n    this.feedbackGainNodeL.connect(this.filtersL[0]);\n    this.feedbackGainNodeR.connect(this.filtersR[0]);\n    this.merger.connect(this.output);\n\n    this.rate = initValue(properties.rate, this.defaults.rate.value);\n    this.baseModulationFrequency = properties.baseModulationFrequency || this.defaults.baseModulationFrequency.value;\n    this.depth = initValue(properties.depth, this.defaults.depth.value);\n    this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\n    this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n    this.lfoL.activate(true);\n    this.lfoR.activate(true);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Phaser.prototype = Object.create(Super, {\n    name: {\n        value: \"Phaser\"\n    },\n    stage: {\n        value: 4\n    },\n    defaults: {\n        writable: true,\n        value: {\n            rate: {\n                value: 0.1,\n                min: 0,\n                max: 8,\n                automatable: false,\n                type: FLOAT\n            },\n            depth: {\n                value: 0.6,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            },\n            feedback: {\n                value: 0.7,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            },\n            stereoPhase: {\n                value: 40,\n                min: 0,\n                max: 180,\n                automatable: false,\n                type: FLOAT\n            },\n            baseModulationFrequency: {\n                value: 700,\n                min: 500,\n                max: 1500,\n                automatable: false,\n                type: FLOAT\n            }\n        }\n    },\n    callback: {\n        value: function(filters, value) {\n            for (var stage = 0; stage < 4; stage++) {\n                filters[stage].frequency.value = value;\n            }\n        }\n    },\n    depth: {\n        get: function() {\n            return this._depth;\n        },\n        set: function(value) {\n            this._depth = value;\n            this.lfoL.oscillation = this._baseModulationFrequency * this._depth;\n            this.lfoR.oscillation = this._baseModulationFrequency * this._depth;\n        }\n    },\n    rate: {\n        get: function() {\n            return this._rate;\n        },\n        set: function(value) {\n            this._rate = value;\n            this.lfoL.frequency = this._rate;\n            this.lfoR.frequency = this._rate;\n        }\n    },\n    baseModulationFrequency: {\n        enumerable: true,\n        get: function() {\n            return this._baseModulationFrequency;\n        },\n        set: function(value) {\n            this._baseModulationFrequency = value;\n            this.lfoL.offset = this._baseModulationFrequency;\n            this.lfoR.offset = this._baseModulationFrequency;\n            this._depth = this._depth;\n        }\n    },\n    feedback: {\n        get: function() {\n            return this._feedback;\n        },\n        set: function(value) {\n            this._feedback = value;\n            this.feedbackGainNodeL.gain.value = this._feedback;\n            this.feedbackGainNodeR.gain.value = this._feedback;\n        }\n    },\n    stereoPhase: {\n        get: function() {\n            return this._stereoPhase;\n        },\n        set: function(value) {\n            this._stereoPhase = value;\n            var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n            newPhase = fmod(newPhase, 2 * Math.PI);\n            this.lfoR._phase = newPhase;\n        }\n    }\n});\n\nTuna.prototype.PingPongDelay = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.wetLevel = userContext.createGain();\n    this.stereoToMonoMix = userContext.createGain();\n    this.feedbackLevel = userContext.createGain();\n    this.output = userContext.createGain();\n    this.delayLeft = userContext.createDelay();\n    this.delayRight = userContext.createDelay();\n\n    this.activateNode = userContext.createGain();\n    this.splitter = userContext.createChannelSplitter(2);\n    this.merger = userContext.createChannelMerger(2);\n\n    this.activateNode.connect(this.splitter);\n    this.splitter.connect(this.stereoToMonoMix, 0, 0);\n    this.splitter.connect(this.stereoToMonoMix, 1, 0);\n    this.stereoToMonoMix.gain.value = .5;\n    this.stereoToMonoMix.connect(this.wetLevel);\n    this.wetLevel.connect(this.delayLeft);\n    this.feedbackLevel.connect(this.delayLeft);\n    this.delayLeft.connect(this.delayRight);\n    this.delayRight.connect(this.feedbackLevel);\n    this.delayLeft.connect(this.merger, 0, 0);\n    this.delayRight.connect(this.merger, 0, 1);\n    this.merger.connect(this.output);\n    this.activateNode.connect(this.output);\n\n    this.delayTimeLeft = properties.delayTimeLeft !== undefined ? properties.delayTimeLeft : this.defaults.delayTimeLeft.value;\n    this.delayTimeRight = properties.delayTimeRight !== undefined ? properties.delayTimeRight : this.defaults.delayTimeRight.value;\n    this.feedbackLevel.gain.value = properties.feedback !== undefined ? properties.feedback : this.defaults.feedback.value;\n    this.wetLevel.gain.value = properties.wetLevel !== undefined ? properties.wetLevel : this.defaults.wetLevel.value;\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.PingPongDelay.prototype = Object.create(Super, {\n    name: {\n        value: \"PingPongDelay\"\n    },\n    delayTimeLeft: {\n        enumerable: true,\n        get: function() {\n            return this._delayTimeLeft;\n        },\n        set: function(value) {\n            this._delayTimeLeft = value;\n            this.delayLeft.delayTime.value = value / 1000;\n        }\n    },\n    delayTimeRight: {\n        enumerable: true,\n        get: function() {\n            return this._delayTimeRight;\n        },\n        set: function(value) {\n            this._delayTimeRight = value;\n            this.delayRight.delayTime.value = value / 1000;\n        }\n    },\n    defaults: {\n        writable: true,\n        value: {\n            delayTimeLeft: {\n                value: 200,\n                min: 1,\n                max: 10000,\n                automatable: false,\n                type: INT\n            },\n            delayTimeRight: {\n                value: 400,\n                min: 1,\n                max: 10000,\n                automatable: false,\n                type: INT\n            },\n            feedback: {\n                value: 0.3,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            },\n            wetLevel: {\n                value: 0.5,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            }\n        }\n    }\n});\n\nTuna.prototype.Tremolo = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.splitter = this.activateNode = userContext.createChannelSplitter(\n            2),\n        this.amplitudeL = userContext.createGain(),\n        this.amplitudeR = userContext.createGain(),\n        this.merger = userContext.createChannelMerger(2),\n        this.output = userContext.createGain();\n    this.lfoL = new userInstance.LFO({\n        target: this.amplitudeL.gain,\n        callback: pipe\n    });\n    this.lfoR = new userInstance.LFO({\n        target: this.amplitudeR.gain,\n        callback: pipe\n    });\n\n    this.input.connect(this.splitter);\n    this.splitter.connect(this.amplitudeL, 0);\n    this.splitter.connect(this.amplitudeR, 1);\n    this.amplitudeL.connect(this.merger, 0, 0);\n    this.amplitudeR.connect(this.merger, 0, 1);\n    this.merger.connect(this.output);\n\n    this.rate = properties.rate || this.defaults.rate.value;\n    this.intensity = initValue(properties.intensity, this.defaults.intensity.value);\n    this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\n\n    this.lfoL.offset = 1 - (this.intensity / 2);\n    this.lfoR.offset = 1 - (this.intensity / 2);\n    this.lfoL.phase = this.stereoPhase * Math.PI / 180;\n\n    this.lfoL.activate(true);\n    this.lfoR.activate(true);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.Tremolo.prototype = Object.create(Super, {\n    name: {\n        value: \"Tremolo\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            intensity: {\n                value: 0.3,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            },\n            stereoPhase: {\n                value: 0,\n                min: 0,\n                max: 180,\n                automatable: false,\n                type: FLOAT\n            },\n            rate: {\n                value: 5,\n                min: 0.1,\n                max: 11,\n                automatable: false,\n                type: FLOAT\n            }\n        }\n    },\n    intensity: {\n        enumerable: true,\n        get: function() {\n            return this._intensity;\n        },\n        set: function(value) {\n            this._intensity = value;\n            this.lfoL.offset = 1 - this._intensity / 2;\n            this.lfoR.offset = 1 - this._intensity / 2;\n            this.lfoL.oscillation = this._intensity;\n            this.lfoR.oscillation = this._intensity;\n        }\n    },\n    rate: {\n        enumerable: true,\n        get: function() {\n            return this._rate;\n        },\n        set: function(value) {\n            this._rate = value;\n            this.lfoL.frequency = this._rate;\n            this.lfoR.frequency = this._rate;\n        }\n    },\n    stereoPhase: {\n        enumerable: true,\n        get: function() {\n            return this._rate;\n        },\n        set: function(value) {\n            this._stereoPhase = value;\n            var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\n            newPhase = fmod(newPhase, 2 * Math.PI);\n            this.lfoR.phase = newPhase;\n        }\n    }\n});\n\nTuna.prototype.WahWah = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.activateNode = userContext.createGain();\n    this.envelopeFollower = new userInstance.EnvelopeFollower({\n        target: this,\n        callback: function(context, value) {\n            context.sweep = value;\n        }\n    });\n    this.filterBp = userContext.createBiquadFilter();\n    this.filterPeaking = userContext.createBiquadFilter();\n    this.output = userContext.createGain();\n\n    //Connect AudioNodes\n    this.activateNode.connect(this.filterBp);\n    this.filterBp.connect(this.filterPeaking);\n    this.filterPeaking.connect(this.output);\n\n    //Set Properties\n    this.init();\n    this.automode = initValue(properties.enableAutoMode, this.defaults.automode.value);\n    this.resonance = properties.resonance || this.defaults.resonance.value;\n    this.sensitivity = initValue(properties.sensitivity, this.defaults.sensitivity.value);\n    this.baseFrequency = initValue(properties.baseFrequency, this.defaults.baseFrequency.value);\n    this.excursionOctaves = properties.excursionOctaves || this.defaults.excursionOctaves.value;\n    this.sweep = initValue(properties.sweep, this.defaults.sweep.value);\n\n    this.activateNode.gain.value = 2;\n    this.envelopeFollower.activate(true);\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.WahWah.prototype = Object.create(Super, {\n    name: {\n        value: \"WahWah\"\n    },\n    defaults: {\n        writable: true,\n        value: {\n            automode: {\n                value: true,\n                automatable: false,\n                type: BOOLEAN\n            },\n            baseFrequency: {\n                value: 0.5,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            },\n            excursionOctaves: {\n                value: 2,\n                min: 1,\n                max: 6,\n                automatable: false,\n                type: FLOAT\n            },\n            sweep: {\n                value: 0.2,\n                min: 0,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            },\n            resonance: {\n                value: 10,\n                min: 1,\n                max: 100,\n                automatable: false,\n                type: FLOAT\n            },\n            sensitivity: {\n                value: 0.5,\n                min: -1,\n                max: 1,\n                automatable: false,\n                type: FLOAT\n            }\n        }\n    },\n    activateCallback: {\n        value: function(value) {\n            this.automode = value;\n        }\n    },\n    automode: {\n        get: function() {\n            return this._automode;\n        },\n        set: function(value) {\n            this._automode = value;\n            if (value) {\n                this.activateNode.connect(this.envelopeFollower.input);\n                this.envelopeFollower.activate(true);\n            } else {\n                this.envelopeFollower.activate(false);\n                this.activateNode.disconnect();\n                this.activateNode.connect(this.filterBp);\n            }\n        }\n    },\n    filterFreqTimeout: {\n        value: 0\n    },\n    setFilterFreq: {\n        value: function() {\n            try {\n                this.filterBp.frequency.value = this._baseFrequency + this._excursionFrequency * this._sweep;\n                this.filterPeaking.frequency.value = this._baseFrequency + this._excursionFrequency * this._sweep;\n            } catch (e) {\n                clearTimeout(this.filterFreqTimeout);\n                //put on the next cycle to let all init properties be set\n                this.filterFreqTimeout = setTimeout(function() {\n                    this.setFilterFreq();\n                }.bind(this), 0);\n            }\n        }\n    },\n    sweep: {\n        enumerable: true,\n        get: function() {\n            return this._sweep.value;\n        },\n        set: function(value) {\n            this._sweep = Math.pow(value > 1 ? 1 : value < 0 ? 0 : value, this._sensitivity);\n            this.setFilterFreq();\n        }\n    },\n    baseFrequency: {\n        enumerable: true,\n        get: function() {\n            return this._baseFrequency;\n        },\n        set: function(value) {\n            this._baseFrequency = 50 * Math.pow(10, value *\n                2);\n            this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n            this.setFilterFreq();\n        }\n    },\n    excursionOctaves: {\n        enumerable: true,\n        get: function() {\n            return this._excursionOctaves;\n        },\n        set: function(value) {\n            this._excursionOctaves = value;\n            this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\n            this.setFilterFreq();\n        }\n    },\n    sensitivity: {\n        enumerable: true,\n        get: function() {\n            return this._sensitivity;\n        },\n        set: function(value) {\n            this._sensitivity = Math.pow(10, value);\n        }\n    },\n    resonance: {\n        enumerable: true,\n        get: function() {\n            return this._resonance;\n        },\n        set: function(value) {\n            this._resonance = value;\n            this.filterPeaking.Q = this._resonance;\n        }\n    },\n    init: {\n        value: function() {\n            this.output.gain.value = 1;\n            this.filterPeaking.type = \"peaking\";\n            this.filterBp.type = \"bandpass\";\n            this.filterPeaking.frequency.value = 100;\n            this.filterPeaking.gain.value = 20;\n            this.filterPeaking.Q.value = 5;\n            this.filterBp.frequency.value = 100;\n            this.filterBp.Q.value = 1;\n        }\n    }\n});\n\nTuna.prototype.EnvelopeFollower = function(properties) {\n    if (!properties) {\n        properties = this.getDefaults();\n    }\n    this.input = userContext.createGain();\n    this.jsNode = this.output = userContext.createScriptProcessor(this.buffersize, 1, 1);\n\n    this.input.connect(this.output);\n\n    this.attackTime = initValue(properties.attackTime, this.defaults.attackTime.value);\n    this.releaseTime = initValue(properties.releaseTime, this.defaults.releaseTime.value);\n    this._envelope = 0;\n    this.target = properties.target || {};\n    this.callback = properties.callback || function() {};\n};\nTuna.prototype.EnvelopeFollower.prototype = Object.create(Super, {\n    name: {\n        value: \"EnvelopeFollower\"\n    },\n    defaults: {\n        value: {\n            attackTime: {\n                value: 0.003,\n                min: 0,\n                max: 0.5,\n                automatable: false,\n                type: FLOAT\n            },\n            releaseTime: {\n                value: 0.5,\n                min: 0,\n                max: 0.5,\n                automatable: false,\n                type: FLOAT\n            }\n        }\n    },\n    buffersize: {\n        value: 256\n    },\n    envelope: {\n        value: 0\n    },\n    sampleRate: {\n        value: 44100\n    },\n    attackTime: {\n        enumerable: true,\n        get: function() {\n            return this._attackTime;\n        },\n        set: function(value) {\n            this._attackTime = value;\n            this._attackC = Math.exp(-1 / this._attackTime * this.sampleRate / this.buffersize);\n        }\n    },\n    releaseTime: {\n        enumerable: true,\n        get: function() {\n            return this._releaseTime;\n        },\n        set: function(value) {\n            this._releaseTime = value;\n            this._releaseC = Math.exp(-1 / this._releaseTime * this.sampleRate / this.buffersize);\n        }\n    },\n    callback: {\n        get: function() {\n            return this._callback;\n        },\n        set: function(value) {\n            if (typeof value === \"function\") {\n                this._callback = value;\n            } else {\n                console.error(\"tuna.js: \" + this.name + \": Callback must be a function!\");\n            }\n        }\n    },\n    target: {\n        get: function() {\n            return this._target;\n        },\n        set: function(value) {\n            this._target = value;\n        }\n    },\n    activate: {\n        value: function(doActivate) {\n            this.activated = doActivate;\n            if (doActivate) {\n                this.jsNode.connect(userContext.destination);\n                this.jsNode.onaudioprocess = this.returnCompute(this);\n            } else {\n                this.jsNode.disconnect();\n                this.jsNode.onaudioprocess = null;\n            }\n        }\n    },\n    returnCompute: {\n        value: function(instance) {\n            return function(event) {\n                instance.compute(event);\n            };\n        }\n    },\n    compute: {\n        value: function(event) {\n            var count = event.inputBuffer.getChannelData(0).length,\n                channels = event.inputBuffer.numberOfChannels,\n                current, chan, rms, i;\n            chan = rms = i = 0;\n            if (channels > 1) { //need to mixdown\n                for (i = 0; i < count; ++i) {\n                    for (; chan < channels; ++chan) {\n                        current = event.inputBuffer.getChannelData(chan)[i];\n                        rms += (current * current) / channels;\n                    }\n                }\n            } else {\n                for (i = 0; i < count; ++i) {\n                    current = event.inputBuffer.getChannelData(0)[i];\n                    rms += (current * current);\n                }\n            }\n            rms = Math.sqrt(rms);\n\n            if (this._envelope < rms) {\n                this._envelope *= this._attackC;\n                this._envelope += (1 - this._attackC) * rms;\n            } else {\n                this._envelope *= this._releaseC;\n                this._envelope += (1 - this._releaseC) * rms;\n            }\n            this._callback(this._target, this._envelope);\n        }\n    }\n});\n\nTuna.prototype.LFO = function(properties) {\n    //Instantiate AudioNode\n    this.output = userContext.createScriptProcessor(256, 1, 1);\n    this.activateNode = userContext.destination;\n\n    //Set Properties\n    this.frequency = initValue(properties.frequency, this.defaults.frequency.value);\n    this.offset = initValue(properties.offset, this.defaults.offset.value);\n    this.oscillation = initValue(properties.oscillation, this.defaults.oscillation.value);\n    this.phase = initValue(properties.phase, this.defaults.phase.value);\n    this.target = properties.target || {};\n    this.output.onaudioprocess = this.callback(properties.callback || function() {});\n    this.bypass = properties.bypass || false;\n};\nTuna.prototype.LFO.prototype = Object.create(Super, {\n    name: {\n        value: \"LFO\"\n    },\n    bufferSize: {\n        value: 256\n    },\n    sampleRate: {\n        value: 44100\n    },\n    defaults: {\n        value: {\n            frequency: {\n                value: 1,\n                min: 0,\n                max: 20,\n                automatable: false,\n                type: FLOAT\n            },\n            offset: {\n                value: 0.85,\n                min: 0,\n                max: 22049,\n                automatable: false,\n                type: FLOAT\n            },\n            oscillation: {\n                value: 0.3,\n                min: -22050,\n                max: 22050,\n                automatable: false,\n                type: FLOAT\n            },\n            phase: {\n                value: 0,\n                min: 0,\n                max: 2 * Math.PI,\n                automatable: false,\n                type: FLOAT\n            }\n        }\n    },\n    frequency: {\n        get: function() {\n            return this._frequency;\n        },\n        set: function(value) {\n            this._frequency = value;\n            this._phaseInc = 2 * Math.PI * this._frequency * this.bufferSize / this.sampleRate;\n        }\n    },\n    offset: {\n        get: function() {\n            return this._offset;\n        },\n        set: function(value) {\n            this._offset = value;\n        }\n    },\n    oscillation: {\n        get: function() {\n            return this._oscillation;\n        },\n        set: function(value) {\n            this._oscillation = value;\n        }\n    },\n    phase: {\n        get: function() {\n            return this._phase;\n        },\n        set: function(value) {\n            this._phase = value;\n        }\n    },\n    target: {\n        get: function() {\n            return this._target;\n        },\n        set: function(value) {\n            this._target = value;\n        }\n    },\n    activate: {\n        value: function(doActivate) {\n            if (!doActivate) {\n                this.output.disconnect(userContext.destination);\n            } else {\n                this.output.connect(userContext.destination);\n            }\n        }\n    },\n    callback: {\n        value: function(callback) {\n            var that = this;\n            return function() {\n                that._phase += that._phaseInc;\n                if (that._phase > 2 * Math.PI) {\n                    that._phase = 0;\n                }\n                callback(that._target, that._offset + that._oscillation * Math.sin(that._phase));\n            };\n        }\n    }\n});\n\nTuna.toString = Tuna.prototype.toString = function() {\n    return \"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js\";\n};\n\nexport { Tuna };\n\n\n\n// WEBPACK FOOTER //\n// ./javascripts/tuna-master/tuna.js"],"sourceRoot":""}